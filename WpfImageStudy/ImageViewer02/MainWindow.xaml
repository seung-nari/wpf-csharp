<Window x:Class="ImageViewer02.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="ImageViewer02 - Step2 (Zoom/Pan)"
        Width="1100" Height="750"
        Background="#222">
    <DockPanel>

        <!-- 상단 툴바 -->
        <Border DockPanel.Dock="Top" Background="#F2F2F2" Padding="10">
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                <Button Content="이미지 열기" Width="120" Height="32"
                        Click="BtnOpen_Click"/>
                <Button Content="초기화(1:1)" Width="110" Height="32" Margin="8,0,0,0"
                        Click="BtnReset_Click"/>

                <TextBlock x:Name="TxtInfo" Margin="12,0,0,0" VerticalAlignment="Center"
                           Text="Wheel: Zoom / Drag: Pan" />

                <TextBlock x:Name="TxtPath" Margin="12,0,0,0" VerticalAlignment="Center"
                           Text="" TextTrimming="CharacterEllipsis" Width="520"/>
            </StackPanel>
        </Border>

        <!-- 뷰어 영역 -->
        <Border Margin="10" BorderBrush="#555" BorderThickness="1" Background="Black"
                ClipToBounds="True">
            <!-- 여기서 마우스 입력 받음 -->
            <Grid x:Name="Viewport"
                  MouseWheel="Viewport_MouseWheel"
                  MouseLeftButtonDown="Viewport_MouseLeftButtonDown"
                  MouseLeftButtonUp="Viewport_MouseLeftButtonUp"
                  MouseMove="Viewport_MouseMove">

                <!-- Transform 대상: Image -->
                <Image x:Name="ImgMain"
                       Stretch="None"
                       RenderOptions.BitmapScalingMode="HighQuality"
                       SnapsToDevicePixels="True">
                    <Image.RenderTransform>
                        <TransformGroup>
                            <ScaleTransform x:Name="ScaleTf" ScaleX="1" ScaleY="1"/>
                            <TranslateTransform x:Name="TranslateTf" X="0" Y="0"/>
                        </TransformGroup>
                    </Image.RenderTransform>
                </Image>

            </Grid>
        </Border>

    </DockPanel>
</Window>
